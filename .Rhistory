# Load packages ----
# select packages
pkgs <- c("dplyr", "ggplot2")
# install packages
install.packages(setdiff(pkgs, rownames(installed.packages())))
invisible(lapply(pkgs, FUN = library, character.only = TRUE))
# set dates ----
date_start <- "2024-06-10"
date_graph_end <- "2026-08-25"
date_switch <- "2025-09-01"
# Data preparation ----
source("02_test1.R")
############################################################################### #
# Aim ----
#| generating wastewater reports
# Requires:
# NOTES:
#| git cheat: git status, git add -A, git commit -m "", git push, git pull, git restore
#|
############################################################################### #
# Load packages ----
# select packages
pkgs <- c("dplyr", "ggplot2")
# install packages
install.packages(setdiff(pkgs, rownames(installed.packages())))
invisible(lapply(pkgs, FUN = library, character.only = TRUE))
# set dates ----
date_start <- "2024-06-10"
date_graph_end <- "2026-08-25"
date_switch <- "2025-09-01"
# Data preparation ----
source("02_test1.R")
# prepare data ----
df_raw <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
View(df_raw)
df <- df_raw %>%
select(siteName, labName, labProtocolID, measure, value)
df <- df_raw %>%
select(siteName, labName, labProtocolID, measure, value, flowRate)
min(df$date)
df <- df_raw %>%
select(siteName, collDTStart, labName, labProtocolID, measure, value, flowRate) %>%
mutate(date = format(date, "%d/%m/%Y"))
df <- df_raw %>%
select(siteName, collDTStart, labName, labProtocolID, measure, value, flowRate) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y"))
df <- df_raw %>%
select(siteName, collDTStart, labName, labProtocolID, measure, value, flowRate)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
min(df$date)
max(df$date)
# graph
unique(df$measure)
df <- df_raw %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
# load sars-cov-2 data ----
df_sc <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
# load ppmv data
df_pmmv <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantspmmv&outputFormat=csv")
# join both
df <- df_sc %>%
rbind(df_pmmv)
# clean data
df <- df_raw %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
# compute viral ratio
unique(df$measure)
# graph
df %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
ggplot(aes(x = date, y = value)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
ggplot(aes(x = date, y = value)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
df %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
filter(measure == "SARS-CoV-2 E gene")
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
ggplot(aes(x = date, y = value)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
filter(measure == "SARS-CoV-2 E gene")
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
ggplot(aes(x = date, y = value)) +
geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName == "Aalst") %>%
ggplot(aes(x = date, y = value)) +
# geom_scatter(na.rm = T) +
geom_line(na.rm = T)
filter(siteName %in% ("Aalst", "Oostende") %>%
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% ("Aalst", "Oostende")) %>%
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% ("Aalst", "Oostende")) %>%
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
# geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, color = siteName)) +
# geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, colour = siteName)) +
# geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, fill = siteName)) +
# geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
# geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_scatter(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
unique(df$measure)
# load data ----
# sars-cov-2 data
df_sc <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
# pmmv data
df_pmmv <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantspmmv&outputFormat=csv")
# join both
df <- df_sc %>%
rbind(df_pmmv)
unique(df$measure)
# clean data
df <- df_raw %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
unique(df$measure)
# join both
df <- df_sc %>%
rbind(df_pmmv)
View(df)
# clean data
df <- df %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
read.csv("https://www.geo.be/metadataServices/rest/catalogs/1/resources/fcc5e161-fa39-11ed-bcc8-186571a04de2/xml")
# load data ----
# Belgian data are available here https://www.geo.be/catalog/details/9eec5acf-a2df-11ed-9952-186571a04de2?l=en
names(df_sc)
# sars-cov-2 data
df_sc <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
# pmmv data
df_pmmv <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantspmmv&outputFormat=csv")
# join both
df <- df_sc %>%
rbind(df_pmmv)
# clean data
df <- df %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
# filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2025-09-01") %>%
filter(siteName %in% c("Aalst")) %>%
ggplot(aes(x = date, y = value, group = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
# filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01") %>%
filter(siteName %in% c("Aalst")) %>%
ggplot(aes(x = date, y = value, group = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
# filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01") %>%
filter(siteName %in% c("Aalst")) %>%
ggplot(aes(x = date, y = value, colour = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
# filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01") %>%
filter(siteName %in% c("Aalst")) %>%
ggplot(aes(x = date, y = value, colours = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
# filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01") %>%
filter(siteName %in% c("Aalst")) %>%
ggplot(aes(x = date, y = value, group = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
# filter(labProtocolID == "SC_COV_5.0") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst")) %>%
ggplot(aes(x = date, y = value, group = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_4.1") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = labProtocolID)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_4.1") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_4.1") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName, colours = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
df %>%
filter(labProtocolID == "SC_COV_4.1") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName, color = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# Data preparation ----
source("02_test1.R")
# msg of sucess run
cat("- This script was coded by John \n")
# Data preparation ----
source("02_John.R")
# Data preparation ----
source("02_test_member_1.R")
# Data preparation ----
source("02_test_member_1.R")
# Source member 1 script ----
source("02_test_member_1.R")
# Source member 2 script ----
source("02_test_member_2.R")
# Source member 1 script ----
source("02_test_member_1.R")
# Source member 1 script ----
source("02_test_member_1.R")
# Source member 2 script ----
source("02_test_member_2.R")
# sars-cov-2 data
df_sc <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
# Mission 1.1 ----
## Source member 1 script ----
source("02_test_member_1.R")
## Source member 2 script ----
source("02_test_member_2.R")
# sars-cov-2 data
df_sc <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
# pmmv data
df_pmmv <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantspmmv&outputFormat=csv")
# join both
df <- df_sc %>%
rbind(df_pmmv)
# Load packages ----
# select packages
pkgs <- c("dplyr", "ggplot2")
# install packages
install.packages(setdiff(pkgs, rownames(installed.packages())))
invisible(lapply(pkgs, FUN = library, character.only = TRUE))
# Load packages ----
# select packages
pkgs <- c("dplyr", "ggplot2")
# install packages
install.packages(setdiff(pkgs, rownames(installed.packages())))
invisible(lapply(pkgs, FUN = library, character.only = TRUE))
# load data ----
# Belgian data are available here https://www.geo.be/catalog/details/9eec5acf-a2df-11ed-9952-186571a04de2?l=en
#| Metadata
# sars-cov-2 data
df_sc <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantscovid&outputFormat=csv")
# pmmv data
df_pmmv <- read.csv("https://data.geo.be/ws/sciensano/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sciensano:wastewatertreatmentplantspmmv&outputFormat=csv")
# join both
df <- df_sc %>%
rbind(df_pmmv)
# clean data
df <- df %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
# graph
df %>%
filter(labProtocolID == "SC_COV_4.1") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName, color = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
# graph
plot <- df %>%
filter(labProtocolID == "SC_COV_4.1") %>%
filter(measure == "SARS-CoV-2 E gene") %>%
filter(date > "2024-09-01" & date < "2025-09-01") %>%
filter(siteName %in% c("Aalst", "Oostende")) %>%
ggplot(aes(x = date, y = value, group = siteName, color = siteName)) +
geom_point(na.rm = T) +
geom_line(na.rm = T)
plot
# save
ggsave(file="./graph_oostende_aalst.png",
plot, width = 21, height = 12, dpi = 200)
# save
ggsave(file="./plot/graph_oostende_aalst.png",
plot, width = 21, height = 12, dpi = 200)
# save
ggsave(file="./plot/graph_oostende_aalst.png",
plot, width = 21, height = 12, dpi = 200)
# join both
df <- df_sc %>%
rbind(df_pmmv)
write.csv(df, "C:/Users/raja1557/Downloads/data.csv")
# join both
df <- df_sc %>%
rbind(df_pmmv)
# clean data
df <- df %>%
select(siteName, collDTStart, labName, labProtocolID, flowRate, popServ, measure, value)
# format date
df$date <- as.POSIXct(df$collDTStart, format = "%Y-%m-%dT%H:%M:%S")
df$date <- format(df$date, "%Y-%m-%d")
df <- df %>%
filter(date > "2024-09-01" & date < "2025-09-01")
write.csv(df, "C:/Users/raja1557/Downloads/data.csv")
write.csv(df, "data.csv")
# Load packages ----
# select packages
pkgs <- c("dplyr", "ggplot2")
# install packages
install.packages(setdiff(pkgs, rownames(installed.packages())))
invisible(lapply(pkgs, FUN = library, character.only = TRUE))
# Mission 1.1 ----
## Source member 1 script ----
source("mission1-member_1.R")
## Source member 2 script ----
source("mission1-member_2.R")
# Mission 1.1 ----
## Source member 1 script ----
source("mission1-member_1.R")
## Source member 2 script ----
source("mission1-member_2.R")
# Mission 1.1 ----
## Source member 1 script ----
source("mission1-member1.R")
## Source member 2 script ----
source("mission1-member2.R")
# Mission 1.1 ----
## Source member 1 script ----
source("mission1-member1.R")
## Source member 2 script ----
source("mission1-member2.R")
